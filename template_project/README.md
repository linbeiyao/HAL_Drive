# HAL_Drive 项目模板

本模板提供一个完整的STM32项目框架，集成了所有HAL_Drive库，包括按钮处理库、状态机库、OLED显示库和任务管理库。它为嵌入式应用开发提供了一个高效且结构化的起点。

## 项目结构

```
template_project/
├── App/                    # 应用层代码
│   ├── app_config.h        # 应用配置文件
│   ├── app_includes.h      # 库包含文件
│   ├── app_example.c       # 应用示例代码
│   └── ...                 # 其他应用文件
├── Core/                   # 核心代码
│   ├── Inc/                # 头文件
│   │   ├── main.h          # 主头文件
│   │   └── ...             # 其他头文件
│   └── Src/                # 源文件
│       ├── main.c          # 主程序文件
│       └── ...             # 其他源文件
├── Drivers/                # 芯片驱动程序
├── Middlewares/            # 中间件
└── README.md               # 本文件
```

## 集成库

本模板项目集成了以下HAL_Drive库：

1. **按钮处理库（Button）**
   - 支持多种按键事件（单击、双击、长按、释放等）
   - 灵活的按键配置
   - 支持组合键
   - 支持状态机集成

2. **有限状态机库（FSM）**
   - 轻量级状态管理
   - 事件驱动设计
   - 支持状态转换和超时
   - 易于扩展和维护

3. **OLED显示库（OLED）**
   - 支持I2C接口OLED显示
   - 提供UI管理器和绘图工具
   - 支持多种字体和图形绘制
   - 界面切换和菜单管理

4. **任务管理库（TaskManager）**
   - 协作式多任务管理
   - 支持任务优先级
   - 任务统计和监控
   - 低开销设计

## 使用说明

### 编译和烧录

1. 根据您的具体STM32型号修改时钟配置（SystemClock_Config函数）
2. 调整外设引脚定义（main.h文件）
3. 使用您喜欢的编译工具链编译项目（例如：Keil MDK, STM32CubeIDE, IAR等）
4. 将编译好的二进制文件烧录到您的STM32开发板上

### 添加新功能

1. 在App目录下创建新的应用文件
2. 包含`app_includes.h`头文件以访问所有库
3. 根据需要修改`app_config.h`中的配置参数
4. 在主程序循环中调用您的应用函数

## 示例应用

`app_example.c`提供了一个完整的示例应用，展示如何集成使用所有库：

- 使用按钮库处理按键输入
- 使用FSM管理应用状态
- 使用OLED显示用户界面
- 使用任务管理器执行周期性任务

示例应用实现了一个包含多个界面的菜单系统，可以通过按键进行状态切换和参数调整。

## 自定义配置

您可以根据项目需求修改以下配置：

1. `app_config.h` - 调整库参数和功能开关
2. `main.h` - 修改硬件定义和引脚分配
3. 各库的相关配置文件 - 针对特定库进行配置

## 注意事项

- 本模板使用STM32硬件抽象层(HAL)，确保您的项目中包含相应的HAL库
- 示例代码基于STM32F1系列微控制器，但可以适配到其他STM32系列
- 图形界面依赖于SSD1306 OLED显示控制器，如使用其他显示控制器需修改OLED库

## 联系方式

如有问题或建议，请联系项目维护者。 