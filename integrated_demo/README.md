# HAL_Drive 集成示例项目

本项目是HAL_Drive驱动库的完整集成示例，展示了如何在一个实际应用中结合使用OLED显示、按键处理、状态机和任务管理器等功能模块。本示例设计了一个简单的用户界面系统，通过按键可以在不同的功能界面之间切换，并且使用状态机管理应用的工作状态。

## 项目结构

```
integrated_demo/
├── App/                    # 应用层代码
│   ├── app_config.h        # 应用配置文件
│   ├── app_includes.h      # 库包含文件
│   ├── app_example.c       # 应用示例代码
│   └── app_fsm.h           # 应用状态机定义
├── Core/                   # 核心代码
│   ├── Inc/                # 头文件
│   │   ├── main.h          # 主头文件
│   │   └── ...             # 其他头文件
│   └── Src/                # 源文件
│       ├── main.c          # 主程序文件
│       └── ...             # 其他源文件
└── README.md               # 本文件
```

## 功能特性

1. **OLED多界面显示**
   - 主界面、状态界面、数据界面和设置界面
   - 界面之间平滑切换
   - 弹窗和提示功能

2. **按键控制系统**
   - 支持四个按键：上、下、确认、返回
   - 单击、双击和长按功能
   - 组合键支持

3. **状态机逻辑控制**
   - 应用状态管理
   - 基于事件的状态转换
   - 按键与状态机集成

4. **多任务管理**
   - 用户界面任务
   - 数据处理任务
   - 系统监控任务
   - 灯光控制任务

## 使用方法

### 编译和烧录

1. 根据您的STM32开发板修改时钟配置
2. 调整引脚定义以匹配您的硬件连接
3. 使用您喜欢的IDE编译项目
4. 将程序烧录到开发板

### 操作说明

- **上/下按键**：在界面之间切换或调整数值
- **确认按键**：选择当前选项或进入子菜单
- **返回按键**：返回上一级菜单
- **组合键**：上+下同时按下可进入系统设置

## 开发扩展

本示例提供了扩展的基础架构，您可以：

1. 在`app_fsm.h`中添加新的状态和转换
2. 在UI管理器中添加新的界面
3. 定义新的任务处理函数
4. 添加新的硬件驱动支持

## 性能考虑

- OLED更新频率：约10帧/秒
- 按键轮询间隔：10ms
- 任务切换开销：<1ms
- 内存占用：基本配置约需8KB ROM，2KB RAM

## 注意事项

- 本示例需要连接SSD1306 OLED显示屏（I2C接口）
- 至少需要3个按键才能实现完整功能
- 适用于STM32F1/F4系列微控制器
- 使用HAL库作为底层驱动 